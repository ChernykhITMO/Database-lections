БД - файл 

ИС - совокупность железа, софта для ввода, обработки , выдачи информации

- обработка - программа
- передача - сети 
- хранение - БД

ИС:
- Аппаратное обеспечение
- Программное обеспечение
- Данные, с которыми работают сотрудники

Архитектура - структура организации компонентов

##### Аппаратная архитектура
Железо: сервера
##### Программная архитектура
СУБД 

##### Архитектура данных

##### Сетевая архитектура

##### Компоненты, отвечающие за безопасность и управление

1. Производительность VS надёжность (ракета)
2. Безопастность VS Удобство использования (Ubuntu))
3. Гибкость и простота
4. Стоимость VS качество
5. Скорость разработки VS функциональности
6. Масштабируемость VS эксплутационные затраты
7. Инновации VS проверенные решения (динозавры)
8. Интерпретация VS автономность 
9. Поддержка старых технологий VS Новые
10. Централизация(связь) VS Децентрализация (собственная копия, с ней работаешь сам)

## Функции БД
### 1. Хранение данных
### 2. Организация структур БД
### 3. Обеспечение доступа к БД
### 4. Обеспечение целостности данных
Почта, Питер, Спб 
### 5. Поддержка многопользовательского режима
### 6. Обеспечение безопасности
### 7. Поддержка резервного копирования и восстановления
### 8. Анализ и отчётность 
### 9. Масштабируемость 
БД растёт постоянно

## 

Данные -  представления информации в формализованном видео, подающиеся многократными интерпретациям или обработкам
- все данные имеют структуры
- все ИС построены, как конечные автоматы (пока что)

### Multitier architecture (Многозвенная архитектура) 
- ИС разделяются на отдельные блоки, каждый из которых имеет свою специфическую функцию. Гибкость структуры (т.е. не надо трогать всё)

Уровни:
1. Клиентский
Клиент взаимодействует с системой
Пример: браузер
2. Application (Уровень логики)
Уровень обработки данных 
3. Уровень данных
Хранение, извлечение, управление

Преимущества: 
1. Масштабируемость 
Увеличение производительности 
2. Разделение задач
Над каждым компонентом работает отдельная группа экспертов 
3. Безопасность 
Разделяем контроль на уровнях 
4. Гибкость и повторное использование
5. Поддержка различных интерфейсов

#### Виды многозвенных архитектур
1. Двухзвенные
Тонкие - картика 
Толстые - картинка + данные 
2. Трёхзвенные 
Клиент, сервер приложения, сервер БД
3. n - звенная архитектура
Доп уровни для интеграции с внешним миром

API - получаем набор отдельных функций
## ANSI-SPARC architecture 
American National Standards Institute 
Standards Planning And Requirements(требования) Committee

1. Внешний уровень 
Внешний уровень определяет, как отдельные пользователи видят данные. Это представление данных, которое подходит для конкретного приложения или пользователя.

**Цель**: Пользователи могут иметь разные представления данных, которые удовлетворяют их потребности, например, с разными уровнями детализации или доступности.

2. Концептуальный 
Концептуальный уровень представляет единое логическое представление всех данных, хранящихся в базе данных. Он абстрагирует физическое хранение данных и предоставляет общий интерфейс для всех пользователей.
- 
Как хранятся и связаны между собой
Хранится безопасность, целостность, проверка
3. Физический (внутренний)
Распределение дискового пространства на хранение

Пример: 

+---------------------------------------+
| Заголовок страницы (N байт)           |
+---------------------------------------+
| Id | ...
+---------------------------------------+
| Битик на активность   |
+---------------------------------------+
| ...                                   |
+---------------------------------------+
| Сжатые данные записей                 |
+---------------------------------------+



## Модель ER

Сущность - множество экземпляров однотипных данных

Сильная сущность - сама по себе
Слабая сущность

Атрибут - свойство в сущности 

Связь - между двумя сущностями 

Нотация Чена

Нотация Баркера

Нотация IDEF1X
- датареалиционная модель 

Физическая модель - конкретная привязка к СУБД

`def` **База данных** - это совместно используемый набор логически связанных данных, и описание этих данных, предназначенные для удовлетворения информационных потребностей организаций. **(с) Коннолли и Бегг**

`def` **База данных** - это набор постоянно хранимых данных, используемых прикладными системами какого-либо предприятия. **(с) Дейт**

`def` **База данных** - это совокупность специальным образом организованных данных, хранимых в памяти вычислительной системы, и отображающих состояния объектов и их взаимосвязей в рассматриваемой предметной области. **(с) Хомоненко**
(Повышеву нравится)

Например: нашли файл "самый важный файл в жизни человечества"
Там три столбца X Y Z и цифры
Мы никогда не поймём, что это 
Пока не отображаем предметы в реальный мир, данные сами по себе без СУБД бесполезны
Только СУБД знает, что зашито в **заголовке** (см пример)

`def` **СУБД** - программное обеспечение, с помощью которого пользователи могут определять, создавать и поддерживать базу данных, а также осуществлять к ней контролируемый доступ **(с) Коннолли и Бегг**

`def` **СУБД** - Программное обеспечение, которое управляет всем доступом к базе данных **(с) Дейт**

`def` **СУБД** - это комплекс языковых и программных средств, предназначенный для создания, ведения и совместного использования базы данных многими пользователями **(с) Хомоненко** (Повышеву нравится)

Положение DBMS

Верхний уровень -  приложения (браузер, ворд и тд)
Операционная система (доступ до аппаратной части к компьютеру)
Файловая система (обеспечивает взаимосвязь логических имён файлов с физическим их расположением на дисковом пространстве)
Утилиты (обеспечивают управление файловой системы, дисковым пространством, а так же другой аппаратной частью)
VM (система, которая разделяет диск на тома, как методом дробления, так и методом объединения)
Multipath Software (имеет смысл для серверных решений
ПО, которое обеспечивает многопутевой доступ к железу)
Drivers (физическое ПО, которое обеспечивает доступ к конкретному железу)
Host Bas addapter(интерфейс подключение дискового пространства)
DBMS (СУБД - программный продукт, который является сервисом, т.е. он под ОС, с другой стороны находится в непосредственном контакте с дисковым пространством и железом)

Роль СУБД
1. Управление данными
Хранение, целостность, операции выборки
2. Абстрагирование данных 
Вас максимально далеко держат от данных, чтобы не изменить что-то так, что в последствии не сможет функционировать 
3. Многопользовательский режим
4. Безопасность, целостность, резервное копирование, оптимизация 

Компоненты СУБД
1. Ядро 
Основная загружаемая часть, включает в себя подсистемы: 
- система управления памятью
- модуль управления транзакциями (подразумевает, что несколько транзакций могут происходить одновременно)
- модуль управления данными (чтение, запись данных в файловую систему)
- модуль блокировки (обеспечение управления конкурентным доступом, предотвращает конфликты, когда за одни и те же данные борются пользователи, нужно разделить пользователей, и определить, кому достанутся, кому нет)
2. Файловая система и структура данных
Файлы данных - MDF (Primary Data File)
Место хранения данных по умолчанию
Там же хранятся сервисные данные (схемы, метаданные и др.)

NDF (Secondary Data File) - разделение данных по отдельным физическим устройствам, или для разделения данных в интересах безопасности 

LDF (Block Data File) - файлы транзакций, файлы журналов

Файлы индексов, так же хранятся в NDF для увеличения производительности 

3. Модуль, который отвечает за T-SQL запросы
4. Query Processor 
Модуль, который обеспечивает планировку выполнения запросов
Когда запрос пишем, этот запрос парсится, после этого перестраивается под ту логику, которая заложена 
5. Buffer Pool
То, что хранит кэшированные данные

Сам сервер подключается к SSMS (клиент сервер)
SQL Profiler - в нём можно посмотреть, что делал SQL сервер с моим запросом
SQL Agent - это компонент, который отвечает за резервное копирование (запускается вместе с сервером, без него запускаться не нужно, а то всё рухнет)











