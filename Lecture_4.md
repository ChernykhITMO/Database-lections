Термины реляционной модели:

Отношение - таблица

Схема отношения - заголовок таблицы, названия столбцов

Кортеж - строка

Сущность - описание свойства объекта 

Атрибут - заголовок столбца

Домен - допустимые значения столбца

Значение атрибута - значение пересечения строка столбец, значение ячейки 

Ключ - один или N атрибутов

Тип данных - тип атрибута 

Отношение - двумерная таблица, которая содержит данные, содержательная часть таблицы 

Отношение появляется всегда в результате операции сложения, умножения множеств 

Пример:
Есть множество животных = {собака, лошадь}

Множество корма = {сено, мясо}

Есть сделать перемножение множеств, то получим все сочетания
Собака - сено
Собака - мясо
Лошадь - сено
Лошадь - мясо

это было декартовое произведение

Отношение - это подмножество декартового произведения множеств, образующих отношение 

Сущность - некая величина, описание о котором мы храним в отношении

Пример: таблица Студенты, сущность студент

Сущности не всегда ассоциируются с конкретным объектом предметной области 

Могут ассоциироваться со связью

Атрибут - столбец

Степень отношения - количество множеств, которые составляют отношение, по сути, количество столбцов

Кардинальное число - количество кортежей

Правила отношений:
1. Отношение должно иметь уникальное имя
2. Уникальность имён 
3. Каждое значение атрибута должно быть неделимым (атомарным)
Определяется не сколько правилами, сколько логикой создания БД
Если в вашем понимании значение неделимо, то оно неделимо 

Пример:
Номер серия паспорта, может быть как два разных столбца, а может быть как один атрибут 

Атомарность неочевидна.

Значения атрибута берутся из определенного домена

Домен - тип данных с дополнительными ограничениями 

пример: в именах почтах нельзя использовать _ и тд

Отношение - подмножество декартового произведения, декартовое произведение не может дать две одинаковые строчки
Отношение не может содержать двух одинаковых строк
Все кортежи уникальны

Не каждый SELECT возвращает отношение 

Нет правил порядка строчек, а так же положения атрибутов относительно друг друга

От порядка атрибутов отношение ничего не утратит

Ключ - один или несколько атрибутов
Может быть однозначным, или из нескольких атрибутов, т.е. в связке

Суперключ - некоторый набор атрибутов, который обладает свойством уникальности

пример: в сущности студент, суперключём может быть номер студента, фио. 

Суперключ избыточен - можем выкинуть какой-то из атрибутов, и при этом останется уникальным 

Суперключ - уникальный набор атрибутов 

Потенциальный ключ - набор атрибутов, который обладает и уникальности и не избыточности

Общее правило: потенциальный ключ и суперключ существуют всегда

Первичный ключ - один из потенциальных ключей, удобных нам
Выбирается для проверки на равенство, значит самое удобное - целое число, потому что всё сравнивается быстро, ничего не конвертируется 

БД всегда возвращают набор строк 

Суррогатный ключ - искуственно созданный потенциальный ключ

Артикулы у магазинов бывают для удобства буквенные для удобства человека, это пример суррогатного ключа 

Каждое отношение помимо столбцов, которые мы записываем, ещё содержит:

Глобальный идентификатор - чтобы уникально идентифицировать все кортежи

Каждое отношение должно иметь атрибут с датой создания строки

Внешний ключ - атрибут или набор атрибутов дочерней таблицы, значения которых соответствуют некоторому первичному ключу

Product и дочерний Color

|         Product          |
| :----------------------: |
| Id product (primary key) |
|           Name           |
|  Id color (foreigh key)  |

|  Color   |
| :------: |
| Id color |

Типы связи:
1. Один к одному

|         Сотрудник          |
|:--------------------------:|
| Id сотрудника(primary key) |

|      Фотография       |
| :-------------------: |
| Id фотографии(pk, fk) |

2. Один-к-многим

> Есть таблица групп и студентов. Значение Id группы у студента будет `FK`, который взят из Id, то есть `PK` группы.

**Student**

|Table_Number|LastName|MiddleName|FirstName|Group_Id (`FK`)|
|---|---|---|---|---|
|1|Кудашев|Эдуардович|Искандер|32011|

**Group**

|Group_Id (`PK`)|Other fields|
|---|---|
|32011|field|
3. Многие ко многим
4. Сам с собой

|                   Сотрудник                   |
| :-------------------------------------------: |
|          Id сотрудника(primary key)           |
|                     Name                      |
| Id руководителя(foreigh key)(ссылается на pk) |
Иванов директор у него на на руководителя нулл
Петров, главный в отделе юристов у него руковод Иванов
Сидоров в отделе юристов у него руковод Петров

**Целостность** бывает двух видов
1. Целостность сущностей
Ни один компонент первичного ключа не может быть NULL значением
2. Ссылочная целостность
Гарантируем, что каждому внешнему ключу соответствует первичный ключ 
- мы не можем добавить не существующее значение внешнего ключа
- мы не можем удалить или изменить первичный ключ, на который кто-то ссылается

**Действия при нарушении ссылочной целостности**
- СУБД не позволит нарушить ссылочную целостность 
Каскадные действия - каскадно проведены действия
пр. Первый товар красный, заменяем номер на 25, значит все ключи, которые ссылались на единичку заменены на 25

Каскадность с удалением - если удалил какой-то цвет, то все товары с этим цветом тоже будут удалены

Замена на значение NULL

Отсутствие реакции - самый плохой вариант




